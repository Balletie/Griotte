<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>The Model</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Highlight js -->
    <link rel="stylesheet" href="./support/html/highlightjs/styles/googlecode.css">
    <script src="./support/html/highlightjs/highlight.pack.js"></script>

    <link rel="stylesheet" href="./support/html/stylesheet.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="content" class="inner">
      <section>
<h1>The Model</h1>
<a id="model"></a>
<p>
This part describes the abstractions, or model, relevant to Griotte. It discusses Griotte's own model, as well as <em>Epicea</em>'s model for <em>fine-grained IDE events</em>.
</p>
<section>
<h2>2.1. Griotte's Model</h2>

<p>
Griotte's model consists of several abstract classes which require to be implemented by a backend. In other words, the classes of the model define a set of operations and accessors which a backend should be able to perform and provide for. The model is defined as follows:
</p>
<dl><dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrUser.class/README.md">GrUser</a></code></dt>
<dd>A user represents someone that performs operations in a review. They can be asked for the repositories that they own.</dd>
<dd>By design, this is an immutable class. This is useful because in this way, one can for example compare a user of a comment with the logged in user of the current <em>context</em> (see the <a href="#context-expl">2.1 explanation on GrContext</a>).</dd>
<dd>One can then display for example in a comment or a review, that the person who made that comment is the one that is logged in (i.e. <em>you</em>).</dd>
<dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrRepository.class/README.md">GrRepository</a></code></dt>
<dd>A repository is in principle a collection of reviews, as far as we are concerned. It can return the <em>local reviews</em>, those active in Griotte, and non-local reviews.</dd>
<dd>It allows for the creation of new reviews, through <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrRepository.class/README.md">GrRepository</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrRepository.class/instance/newReviewWithTitle.description..st">newReviewWithTitle:description:</a></code>.</dd>
<dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/README.md">GrReview</a></code></dt>
<dd>A review is a request for a change to be integrated into the system. It supports two basic operations: <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/README.md">GrReview</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/instance/approve.st">approve</a></code> or <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/README.md">GrReview</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/instance/reject.st">reject</a></code>.</dd>
<dd>It allows for a conversation of the review on a global level. These are called <em>top-level comments</em>. They can be accessed with the <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/README.md">GrReview</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/instance/comments.st">comments</a></code> accessor. New top-level comments can be created using <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/README.md">GrReview</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrReview.class/instance/newCommentWithBody..st">newCommentWithBody:</a></code>.</dd>
<dd>Basic accessors are its title, its creator (which returns a <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrUser.class/README.md">GrUser</a></code>) and its description.</dd>
<dd>In the future, the reviews contain the groups of changes.</dd>
<dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrGroup.class/README.md">GrGroup</a></code></dt>
<dd>A <em>group</em> is a collection of related changes with a description. Comments can be added to groups too, allowing for a more detailed conversation. Groups can be generated by using the information provided by fine-grained IDE events (see <a href="#epicea">2.2</a> for more information).</dd>
<dd>How groups are stored is defined by the backend which implements it.</dd>
<dd>As groups are not yet implemented, the only operation that is known so far is <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrGroup.class/README.md">GrGroup</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrGroup.class/instance/newCommentWithBody..st">newCommentWithBody:</a></code>.</dd>
<dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrComment.class/README.md">GrComment</a></code></dt>
<dd>A comment can be made on either a review (the aforementioned top-level comments) or on a group of changes. The model makes no distinction between comments added to groups or to reviews — both are just comments.</dd>
<dd>A backend can of course distinguish between these two if it is necessary for the implementation.</dd>
<dd>A comment can be edited through <code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrComment.class/README.md">GrComment</a></code><code>&gt;&gt;</code><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrComment.class/instance/edit..st">edit:</a></code>, and it can be accessed for its body, creator, and both the time it was created and the time it was last updated.</dd>
<dt><code><a href="https://github.com/Balletie/Griotte/tree/master/Griotte-Model.package/GrContext.class/README.md">GrContext</a></code></dt>
</dl>
<a id="context-expl"></a><dl><dd>A relatively late addition to the model, this class represents the connection between the repositories that are locally active (those with locally active reviews), and the user that is logged in.</dd>
<dd>The interface of Griotte should allow for multiple contexts to be present at the same time, for using different backends transparently, and for <em>context switching</em> between logins.</dd>
</dl>

<section>
<h3>Local and Non-Local</h3>

<p>
In the above descriptions of the model classes, there are some references to local and non-local repositories or reviews. Local reviews are the reviews which are considered <em>active</em> — that is to say, the reviews that are relevant and being operated on. Local repositories are similar: they contain local reviews.
</p>
<p>
It might be desirable to support operations to remove local repositories or reviews, after you are done with reviewing for example.
</p>
</section></section><section>
<h2>2.2. Epicea Fine-Grained IDE Events</h2>
<a id="epicea"></a>
<p>
Epicea is a <a href="http://pharo.org">Pharo</a> project for recording the actions of a developer within the IDE. It was originally created for the PhD thesis of Martín Dias. The information recorded by Epicea is much more than what is recorded in the Version Control System (e.g. Git) at the point of commit; for example, Epicea records the following:
</p>
<ul>
<li>Each save of a code change (e.g. Class addition, method modification).</li>
<li>Test runs and their respective outcomes.</li>
<li>Versioning operations (commits, checkouts).</li>
<li>Refactorings.</li>
</ul>

<p>
In this sense we say that the events Epicea records are <em>fine-grained</em>, in contrast with the <em>coarse-grained</em> information stored by Version Control Systems.
</p>
<p>
The information provided by Epicea allows one to <em>group</em> changes together when committing them. These groups can then in turn be used for code review. The grouping can be done with the <em>Epicea Untangler</em>.
</p>
<section>
<h3>Epicea Untangler</h3>

<p>
Epicea Untangler is a tool which presents the developer with automatically grouped (or <em>untangled</em>) changes derived using machine learning algorithms. See the <a href="https://hal.inria.fr/hal-01116225">relevant paper</a> (Dias et al.) for more details.
</p>
<p>
The untangler can work together with Griotte when submitting a review. When the groups are correct, Griotte can store the groups in the backend service. How the storing is done is the responsibility of the backend implementations.

</p></section></section></section>
    </div>
    <!-- Syntax highlighting of code blocks -->
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
